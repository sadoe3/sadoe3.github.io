---
title: "Movement by using ChacterController"

categories:
    - unity-self

tags:
    - [Game Engine, Unity]

toc: true
toc_label: "목차"
toc_sticky: true

date: 2021-10-13
---

Unity IN ACTION이라는 책을 읽고 정리한 필기입니다.
{: .notice--warning}

## ChracterController
- A CharacterController allows you to easily do movement constrained by collisions without having to deal with a rigidbody.
- A CharacterController is not affected by forces and will only move when you call the Move function. It will then carry out the movement but be constrained by collisions.

## 사용법
1. 움직임을 담당하는 script의 위쪽 부분에 다음과 같은 코드를 작성합니다.
```c#
using ~; // using part
[RequireComponent(typeof(CharacterController))] // write this code
... // some codes
public class ClassName : MoveBehaviour {
```
2. 움직일 때의 속력을 결정해주는 property를 public이나 private으로 만들어줍니다.
3. ChacterController 오브젝트를 private으로 만들어줍니다.
4. Start()에서 해당 script가 적용될 object의 CharacterController를 GetComponent()를 이용하여 가져옵니다.
5. 그 후, Update()에서 user의 input을 기반으로 movement를 처리해줍니다.
- Example of using ChracterController for movement
```c#
using UnityEngine;
[RequireComponent(typeof(CharacterController))]
public class ClassName : MonoBehaviour
{
    private CharacterController characterController;
    float moveSpeed = 7.5f;
    // Start is called before the first frame update
    void Start()
    {
        characterController = GetComponent<CharacterController>();
    }

    // Update is called once per frame
    void Update()
    {
        Vector3 movement = new Vector3(0f, 0f, 0f);
        float xInput = Input.GetAxis("Horizontal");
        float zInput = Input.GetAxis("Vertical");
        if(xInput != 0 || zInput != 0){
            movement.x = xInput * moveSpeed;
            movement.z = zInput * moveSpeed;
            movement = Vector3.ClampMagnitude(movement, moveSpeed); // this code limits diagonal movement to the same speed as movement along an axis
        }
        movement *= Time.deltaTime; // always multipy movement vector by delta time to make it frame rate-independent
        characterController.Move(movement);
    }
}
```


[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}