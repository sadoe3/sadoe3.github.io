---
title: "Git 사용법"

categories:
    - etc

tags:
    - [etc, Git, GitHub]

toc: true
toc_label: "목차"
toc_sticky: true

date: 2021-11-05
---

## What is Git
- Git은 SVN같은 형상관리 도구입니다.
- Git에 대한 개념과 전반적인 사용법은 [이 영상](https://www.youtube.com/watch?v=Z9dvM7qgN9s)을 참고했습니다.

## How to download & install
- [공식 홈페이지](https://git-scm.com/downloads)에서 다운받을 수 있습니다.
- 설치하고나면, cmd에서 `git --version`이라는 명령어를 통해 제대로 설치되었는지 확인 할 수 있습니다.
    - 해당 명령어를 실행했을때, git version 2.33.0.windows.2 같은 message가 나오면 제대로 설치되었다고 볼 수 있습니다.

## How to setup Git
- Git은 cmd(terminal이라고 부름)에서 적절한 command를 입력하는 식으로 사용하게 된다.
- 그래서 Git을 사용하기 위해선 terminal을 사용할 때 필요한 command도 잘 알고 있어야한다.
- 보통 사용되는 방식은 `git [command] [-option] [--option]`으로 사용하게 된다.
    - ex: `git status` 
    - ex: `git config --list`
    - ex: `git commit -m "temp message"`
- Git에서 파일을 열때, 특정 VS Code로 파일을 수정하고 싶은경우 다음과 같은 방법을 사용하면 된다.
    1. cmd에서 `git config --global core.editor "code --wait"` 라고 작성한다.
    2. 이렇게 되면, 특정한 파일을 열때 VS Code가 열리게 되고, 해당 파일을 저장하고 VS Code를 종료할때까지 cmd에서 command를 입력할 수 없게 된다.
        - 수정을 마칠때까지 wait하고 있다고 생각하면 됨
- Git에 대한 사용자의 이름과 이메일을 설정해야하는데, 다음과 같이 설정할 수 있다.
    - `git config --global user.name "Name"`
    - `git config --global user.email "email@email.com"`
    - 이후 제대로 설정되었는지 확인할 때에는, `git config user.name`을 통해 확인할 수 있다.
- 이후 Windows와 Mac에서 줄바꿈에 대하여 다른 처리를 하는것을 Git에서 자동적으로 수정해주는 설정을 해야하는데 (Windows는 \\r\\n이 사용되고, Mac은 \\n만 사용됨) 다음과 같은 설정을 해주면 된다.
    - Windows일 경우, `git config --global core.autocrlf true` 라고 설정해주면 되고,
    - Mac일 경우, `git config --global core.autocrlf input` 이라고 설정해면 된다.

## Git의 전반적인 Workflow
- Git은 3가지의 위치에서 파일들을 관리한다
    - working directory, staging area, .git directory
- local pc에서 project를 git을 기반으로 작업하게 되면, 다음과 같은 Workflow를 거치게 된다.
1. 현재 수정되고 있는 파일들은 Working Directory에서 관리된다.
2. 해당 파일들에 대한 수정을 마치고, 해당 파일들에 `add` command를 사용하게 되면, 해당 파일들이 Working directory에서 Staging Area로 옮겨지게 되어, 해당 파일들에 대한 version 관리를 할 준비를 할 수 있게 된다.
3. Staging Area에 있는 파일들에 `commit` command를 사용하게 되면, 해당 파일들이 Staging Area에서 .git directory로 옮겨가게 되어, Git에서 해당 파일들에 대한 version 관리를 할 수 있게 된다.
4. .git directory를 local pc에서만 관리하지 않고, GitHub같은 server에서 관리하고 싶은 경우, local pc에 있는 .git directory에 `push` command를 사용하여, server에 해당 .git directory를 upload할 수 있다.
5. server에 upload되어 있는 .git directory는 `pull` command를 이용하여 local pc로 download할 수 있다.
    - 이후, .git directory에 있는 특정 version의 파일을 사용하고 싶은 경우, 해당 파일에 `checkout` command를 사용하여, 해당 파일을 working directory로 download할 수 있다.

## .git directory
- .git directory를 만드는 방법
    - cmd에서 원하는 directory로 `cd`를 해준 뒤(필요하다면 directory를 추가적으로 만들어도 됨), `git init`을 하면 해당 directory에 .git directory가 생성되게 됨
    - 이후, `dir /a`를 통해 해당 directory가 제대로 만들어졌는지 확인할 수 있다
- .git directory를 지우는 방법
    - cmd에서 directory를 지우는 command를 그대로 사용하면 됨
    - 즉, `rd /s .git`을 통해 지울 수 있다

## Git에서 command를 줄여서 사용하는 방법
- `git config --global alias.[shortname] [realname] `이라고 설정하면, realname인 command를 shortname으로 사용할 수 있다.
- 즉, 원래는 `git status`라고 해야 작동되는 command를 `git config -global alias.st status`라고 설정해주면, `git st`라고 해도 `git status`와 동일한 command가 실행된다.

## Git에서 사용되는 command를 공부하는 방법
- Git official site에 있는 [reference](https://git-scm.com/docs)를 기반으로 공부할 수 있습니다.
- 또한, cmd에서 특정 command에 `--h`라는 옵션을 사용하여, 해당 command의 option들을 cmd에서 확인할 수 있다.
    - ex: `git config --h`

## Tracked or Modified file
- 파일이 Git에 처음 들어오게되면, 해당 파일은 untracked file이 되고, working directory에 존재하게 된다.
    - untracked file에 `add` command를 이용하면, 해당 파일은 tracked file이 되고, staging area로 옮겨지게 된다.
- Tracked file이 수정되면, 해당 파일은 modified file이 되고, 수정되기 전 tracked file은 staging area에 있지만, 방금 수정된 modified file은 working directory에 존재하게 된다.
    - 즉, 같은 파일이 수정 전과 후를 기준으로 working directory와 staging area에 동시에 존재하게 됨
    - 이렇게 된 경우에도, 해당 파일에 `add` command를 이용하면, working directory에 있던 modified file은 tracked file이 되며, 기존에 staging area 있던 수정되기전 tracked file은 사라지고, working directory에 있던 방금 tracked file로 바뀐 파일이 stagin area로 옮겨지게 된다.

## git status
- `git status`를 사용하게 되면, 현재 untracked file들에는 무엇이 있고, commit할 수 있는 파일(즉, tracked이면서 modified되어 있는 파일)들에는 무엇이 있는지 등을 terminal에서 확인할 수 있다.

## .gitignore file
- Git에서 존재하는 파일들 중 몇몇 파일들은 version control를 하고싶지 않을때, 해당 파일들의 이름(확장자포함)을 .gitignore라는 파일에 넣어주면, `git status`에서 untracked file 리스트를 포함한 어디에도 해당 파일들이 뜨지 않게 설정해 줄 수 있다.
    - 즉, 해당 파일들이 존재하든 말든, 변경되든 안되든 git은 해당파일을 그냥 무시하게 됨
- .gitignore 파일을 만드는 방법은 여러 가지가 있는데 그 중 하나는 다음과 같다.
    1. windows explorer를 열고, explorer가 파일의 extension까지 보여지게 설정한다.
    2. 이후, .git directory가 들어있는 위치로 이동한다
    3. 해당 폴더에 text파일을 만들고, 해당 text 파일의 이름을 확장자를 포함해서 모두 지운 뒤, .gitignore. 이라고 이름을 변경한다. 
    4. 이렇게 하여 .gitignore라는 파일을 windows에서 만들 수 있다.
    5. 이후 해당 파일을 더블클릭하여 열게 되면, vs code나 notepad 같은 프로그램으로 열리게 되는데, 해당파일에 ignore하고 싶은 파일들의 이름을 적어서 저장하는식으로 사용하면 된다.
- 이때, .gitignore file에는 특정 파일의 이름말고 다른 것들도 추가할 수 있다.
    - log.log (확장자를 포함한 특정 파일 이름)
    - *.log (log라는 확장자를 갖는 모든 파일들)
    - build/ (build folder 안에 있는 모든 파일들)
    - build/*.log (build folder 안에서 log라는 확장자를 갖는 모든 파일들)
    - \# comment (주석처리를 해줄 수도 있음)

## Git을 local pc에서 사용하는 방법
1. 위에서 정리한 개념을 기반으로, Version Control을 하고 싶은 폴더에 .git directory를 만들고, 초기설정을 적절히 한다.
2. Project를 진행하며, 새로운 파일을 추가하거나 기존 파일을 변경하는 식으로 해당 폴더에 변경사항을 만든다.
3. Terminal에서 변경된 내용에 대해 `add` command를 사용하여, 해당 파일들을 staging area로 옮긴다.
    - ex: `git add NameC.txt`
    - `add`를 할때, 여러파일을 올리는 방법
        - 그냥 하나하나 지정하기 -> `git add NameA.txt NameB.txt`
        - 같은 확장자를 한번에 지정하기 -> `git add *.txt`
        - 전체 파일 선택 -> `git add *`
    - staging area에 있던 파일들을 다시 working directory로 옮기고 싶은 경우, `git rm --cached *`를 사용하면 된다
    - working directory에서 제거한 파일을 staging area에서도 제거하고 싶으면, `git add .` 이라는 command를 사용하면 된다
4. Terminal에서 staging area에 있는 파일들을 `commit` command를 사용하여, 해당 파일들을 .git directory로 옮긴다.
    - `git commit`이라는 command를 사용하게 되면, 초기설정에서 정한 text editor(ex: vs code)에서 COMMIT_EDITMSG가 열리게 된다.
    - 해당 message file에서 1번째 줄에는 commit된 내용의 title을 적으면 되며
        - 이 title을 commit message라고 부름
        - 이 title은 함수 이름처럼, verb로 시작하는 형태로 적으면 됨    
    - 그 다음줄부터는 해당 `commit`의 세부사항을 적으면 된다.
    - 다 적고 나면, 해당 message file을 저장하고 닫으면되고, 이렇게 되면 `commit`이 완료된다
    - 이후, `git log`라는 command를 사용하여, `commit`할때 작성한 모든 commit message file들을 볼 수 있다.
    - 매번 `commit`을 할때매다 번거롭게, text editor에서 commit message를 작성하기 싫은 경우, 간단하게 `git commit -m "temp commit title"` command를 사용하여, commit msg의 title만 제공하여, `commit`를 간단하게 진행 할 수도 있다.
    - 여기서 좀 더 나아가서, `git commit -am "temp commit title"` command를 사용하면, 파일을 변경한 후에 `add`를 하지않고 바로 `commit`을 할 수 있게 된다.

## Commit할 때 주의할 점
- `commit`을 할 때에는 project 전체를 `commit`하는 것이 아니라, project를 기능별로 나누어서, 해당 기능이 추가되거나 변경될때마다 기능별로 `commit`을 하는 식으로 진행하면 된다.
- 또한, commit message가 변경사항을 모두 표현하지 못하게 되면, 나중에 version control하기가 상당히 힘들어지기 때문에, `commit`을 할때에는 commit message가 변경사항을 모두 표현할 수 있도록 해야한다.

## Git and GitHub
- 지금까지의 개념을 이해했다면, local pc에서 Git을 충분히 쉽게 사용할 수 있을 것이다.
- 다만, Git은 보통 GitHub와 같이 사용하여, version control를 하게 되기 때문에, 이번에는 Git와 GitHub를 같이 사용하는 방법에 대해 알아보고자 한다.
- Github는 원격 저장소(remote repository)를 관리할 수 있는 server같은 존재이다.
- Github에 특정 repository를 만든 뒤, 다양한 사람들은 해당 repository를 자신의 pc의 working directory에 복사할 수 있다.
    - 이 과정을 cloning이라고 한다
- 맨 처음에 repository가 만들어지면, 해당 repository는 Version 1인 상태가 된다. 
- 이후 해당 repository를 cloning한 모든 사람들은 각자 자신만의 respository를 각자의 working directory에서 갖게 되는데, 이때에는 모두가 Version 2인 repository를 갖게된다.
    - 즉, cloning이나 pulling을 하게 되면, GitHub에 있는 repository의 version에 +1이 된 version을 자신의 repository로 갖게 된다는 의미
- 자신의 working directory에 있는 repository를 project의 방향에 알맞게 적절히 변경시킨 뒤, 해당 변경사항들을 `commit`하게 되면, 자신의 local pc에서 변경된 파일들을 GitHub에 있는 repository로 upload할 준비를 마치게 된다.
- 변경사항에 대한 `commit`을 마친 후, `push`라는 command를 이용하면, 자신의 변경사항을 GitHub에 있는 repository로 upload하게 된다.
    - 다만 `push`를 할때는 local pc에 있는 repository의 version이 GitHub에 있는 repository의 version보다 1만큼 커야 `push`가 가능하다
- `push`가 성공적으로 되면, 이제 GitHub에 있는 repository는 `push`할때 사용한 repository로 update 된다.
- 즉, 이제 GitHub에 있는 repository의 version이 2가 되었다는 의미인데, 이렇게 되면, version1에서 cloning하여, version2의 repository를 가지고 있던 다른 사람들은 update된 repository를 대상으로 `pull`이라는 command를 통해 변경사항을 자신의 pc에 적용시켜, 자신의 repository를 version3으로 만들어줘야 한다.
    - 이렇게 하지 않으면, version2인 repository를 version2인 repository에 update하는 꼴이 되서 Git에서 `push`를 막아버린다. 
    - 이런 현상을 merge conflict라고 하는데, 이에 대한 해결방법은 밑에 따로 정리해 두었다.
    - `pull`이라는 command는 `fetch`와 `merge`라는 2가지의 command의 기능을 합친 command 이다.
    - `git fetch origin`이라는 command는 origin이라는 url에 있는 repository에서 변경된 사항을 local pc에 가져온다. (가져오기만 하고, .git directory의 내용이 변경되지는 않은 상태)
    - `git merge`라는 command는 `fetch` command로 가져온 변경사항을 local pc에 있는 .git directory에 적용시켜준다. (.git directory의 내용이 변경된 상태)
    - 그래서 이 두개의 command를 합친 `git pull origin`이라는 command는 origin에서 변경사항을 가져와서, local pc의 .git directory에 적용시켜준다.
    - `pull`이 성공적으로 되면, local pc에 있는 repository는 GitHub에 있는 repository보다 1만큼 version이 높아지게 되어, 이제 `push`를 할 수 있게된다.

## Fork
- `Fork`는 Github에 존재하는 특정 repostiory를 나의 github의 repository로 복사하게 한다.

## Git과 GitHub를 연동하는 방법
0. 이 방법은 [이곳](https://uang.tistory.com/11)을 참조하여 만들어졌습니다. 
1. GitHub에 있는 repository의 clone folder가 저장될 폴더를 적절한 위치에 만들고, terminal에서 `cd`를 이용하여 해당 위치로 이동한다.
2. GitHub에서 project에 사용할 repository를 만든다.
    - 이미 repository가 있으면 skip
3. 만들어진 repository를 들어가게 되면, code라는 button이 있는데, 해당 button을 누르게 되면, 해당 repository의 url을 얻을 수 있다.
4. 해당 url을 복사한 뒤, terminal에서 `git clone url`을 통해 해당 repository를 local pc의 working direcotry로 clone한다.
    - clone 된 repository는 새로운 폴더 안에 존재하게 된다
5. 이후 terminal에서 git을 사용하기 위한 초기설정을 해준다.
    - username, email, text editor, autocrlf 설정 등
6. terminal에서 해당 remote repository url을 편하게 사용하기 위해 다음과 같은 command를 이용하여 origin이라는 이름으로 등록해준다.
    - `git remote add origin url`
    - origin말고 다른 이름을 사용해도 된다, 다만 통상적으로 remote url을 origin을 사용한다
    - 이후 git remote -v 를 통해 origin으로 설정된 url이 무엇인지 확인 할 수 있다.
    - 이후 사용을 다하고 나면, git remote remove origin을 통해 origin을 없앨수있다.
7. 이제 terminal과 repository를 적절히 사용하면 된다.
    - local pc의 working directory에서 특정 파일에 대한 수정을 마친 뒤, commit까지 끝내고, 이제 해당 파일을 remote repository에 `push`하고 싶을 때에는, terminal에서 `git push origin`을 사용해주면 된다.
    - remote repository에 update된 변경사항을 local pc에 있는 working directory로 `pull`하고 싶을 때에는, terminal에서 `git pull origin`을 사용해주면 된다.

## How to resolve merge conflict
- merge conflict를 해결하는 방법은 [이곳](https://www.youtube.com/watch?v=__cR7uPBOIk)을 참조했습니다.
- merge conflict가 일어난 경우, 일단 `push`가 안된다.
- 그래서 어느 부분이 변경되었는지를 알기위해, update된 repository를 `pull`을 한다
    - 이렇게 되면, 일반적으로 `pull`이 작동하는 방식에 의해 local pc의 repository는 GitHub에 있는 repository의 version보다 1만큼 커지게 된다.
- `pull`을 하게 되면, working directory에서 merge conflict가 발생된 파일은 local pc에서 변경된 부분과 GitHub에 update된 repository에서 변경된 내용을 동시에 갖고 있게된다.
- <<<<<<< HEAD 에서 ======= 까지 있는 코드가 local pc에서 변경된 내용이고, ======= 에서 >>>>>>> refs/remotes/origin/main(여기부분은 상황에따라 다를 수 있음)까지 있는 코드가 remote repository에서 변경된 내용이다.
- merge conflict가 발생된 두 파일을 비교해서, 맨처음에 달라지는 코드에서 code block이 시작되고, 맨 마지막에 달라지는 코드에서 code block이 마무리되기 때문에, 해당 code block안에는 서로 동일한 부분이 존재 할 수도 있다. 
- 여기서 원하는 목표를 기반으로 둘 중 하나를 없애던지, 아니면 두개의 내용을 적절히 조합시키던지 해서, conflict된 부분을 적절히 해결한 뒤, 해당 변경사항을 `commit`을 하고 `push`를 하는식으로 merge conflict를 해결하면 된다.
- conflict된 부분을 적절히 해결이 되면, 최종적으로 수정된 코드에는, <<<<<<< HEAD, =======, >>>>>> refs/remotes/origin/main(여기부분은 상황에따라 다를 수 있음), 이렇게 3개는 모두 없어야한다.


[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}