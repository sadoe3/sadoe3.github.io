---
title: "Unity 강의 - Day 3"

categories:
    - unity-lecture

tags:
    - [Game Engine, Unity]

toc: true
toc_label: "목차"
toc_sticky: true

date: 2021-10-07
---

전주정보문화산업진흥원에서 진행하는 **게임콘텐츠(Unity3D) 제작 실무자 양성과정** 강의를 듣고 정리한 필기입니다.
{: .notice--warning}

## Unity Script의 수학 관련 함수
- Unity에서는 Mathf라는 클래스를 이용해서 수학관련 함수를 사용한다.
```c#
Mathf.Sqrt(3);      // example of using Mathf class
```

## Unity에서 Random Number 만드는 방법
- UnityEngine의 Random이라는 static class를 이용하면 된다.
- 이용법은 다양하게 있지만 대표적인 2가지 방법은 다음과 같다.
    1. 
    ```c#
    float randomValue = Random.Value;
    ```
        - Random.Value returns randomized value from 0 to 1 (both inclusive) 
    2. 
    ```c#
    float randomValue = Random.Range(a, b); 
    ```
        - Random.Range(a, b) returns randomized value from a to b (both inclusive)

## Debug
- Scripting을 한 후, 컴파일이 제대로 되었는지 확인하는 방법은 다음과 같다.
- 해당 script파일을 저장한 후 Unity로 돌아왔을때, Unity 하단에 빨간줄로 error message가 나왔는지의 여부로 확인할 수 있다.
    - 빨간줄이 나오지 않았다면, 정상적으로 컴파일 된것이다.
    - 빨간줄이 나왔다면, script에 문제가 있다는 것이므로, error message의 정보를 기반으로 debug를 진행해주면 된다.

## Material을 만드는 방법
1. Assets folder -> right click -> create -> material -> select proper material
2. 방금 만든 material 클릭 -> inspector window -> albedo 값을 변경하여, 색 변경하기

## Material을 적용하는 방법
- 해당 material을 원하는 object에 drag & drop 하면 적용된다.

## Hierarchy
- Object들 여러개를 기반으로 hierarchy를 만들게 되면, child object들은 parent object의 좌표를 원점(0,0,0)으로 생각하고, 좌표 설정을 진행하게 된다.
- 그렇기 때문에, parent object의 좌표가 변경되면, child object들의 좌표는 그대로인것 처럼 보여도, 게임 속에서는 변경되었다는 것을 확인할 수 있다.

## Clear flag 
- Camera object의 clear flag 값을 지정하여, 배경 색을 설정할 수 있다.
- 대표적으로 solid color는 단색 설정, skybox는 바닥은 회색, 위쪽부부은 하늘처럼 보이게 설정할 수 있다.

## Tag
- Unity의 object들은 특정 tag값을 설정할 수 있다.
- Inspector window에서 object의 이름 바로 밑에서 설정 가능함
- 기존에 만들어진 tag를 사용해도 되고(ex: Player), custom tag를 만들어서 사용해도 된다.

## Prefab을 script에서 사용하는 방법
1. script에서 GameObject type의 property를 public으로 만든 후, 해당 property를 prefab이라고 간주하고 알맞게 프로그래밍을 진행함
2. 이후, Unity에서 필요한 Prefab파일을 해당 script가 적용된 object의 script component에 알맞게 drag & drop해주면 된다
- 이러한 방식은 prefab이 아닌 다른 종류의 파일이라도 가능하니, 필요한 상황에서 이러한 방법으로 적용해주면 된다.

## Constraints of Rigidbody
- 특정 오브젝트의 Rigidbody component에서 해당 오브젝트의 위치값 고정이나, 중력 비활성화 등을 설정할 수 있습니다.

## Angular Drag
- 가속치를 의미하는 값으로, 값이 줄어들수록 가속력이 줄어듭니다.

## gameObject
- gameObject란 해당 script가 적용된 오브젝트를 reference하는 GameObject type의 object입니다.

## Script에서 오브젝트를 비활성화하는 방법
- 위에서 설명한 gameObject라는 object를 이용하여, 해당 object의 SetActive()를 사용하면 됩니다.
- 
```c#
gameObject.SetActive(false);
```

## FindObjectOfType\<Class_Name>()
- FindObjectOfType\<Class_Name>() method를 이용하여, 특정 script에서 다른 script가 적용된 오브젝트의 reference를 얻을 수 있습니다.
- 
```c#
private GameObject objectName; // use GameObject when you want to handle with general type
private TextMesh textureName;  // use specific type when you want to handle with specific type
...  // some codes  
...  // some codes  
objectName = FindObjectOfType<Class_Name>();
textureName = (TextMesh)FindObjectOfType<TextMesh>(); // when you handle with specific type, you need to cast reference to the specific type
```
- 이러한 방법으로 얻게된 reference에 dot operator를 이용하여 해당 reference의 transform같은 다양한 component들도 사용할 수 있게됩니다.
    - 
    ```c#
    Transform objectTransform = FindObjectOfType<Class_Name>().transform;
    ```
- 해당 오브젝트가 null 값을 갖고 있는지 아닌지를 통해, reference가 제대로 얻어졌는지 확일 할 수 있습니다.
- 이 기능을 사용하여, 특정 script에서 다른 script의 특정 method를 call을 할 수도 있습니다.

## GetComponent\<Component_Name>()
- GetComponent\<Component_Name>() method를 이용하여, 해당 script가 적용된 오브젝트의 특정 component를 얻을 수 있습니다.
- 
```c#
Rigidbody playerRigdbody = GetComponent<RigidBody>();
```

## Destroy()
- Destory(object, time)이라는 method를 이용하면, 특정 object를 특정 time이 지난 후 제거할 수 있습니다.
- 이때 object를 설정하는 방법 중 대표적인 방법은 다음과 같습니다.
    - gameObject 이용하기
    - GameObject를 public property로 만든후, Unity에서 Drag & Drop 하기
    - GameObject를 private property로 만든후, FindObjectOfType\<Class_Name>() method를 이용하기
- time은 second로 적용되며, skip 할경우, 0을 default argument로 갖습니다.

## Custom Collision Detection
- 특정 오브젝트의 충돌 처리를 직접 하고 싶다면, 해당 오브젝트의 Collider Component의 Is Trigger 값을 체크하면 됩니다.
- 다만, Is Trigger값을 체크한다는 것은 Trigger 전용 method를 통해 충돌을 처리한다는 의미이기 때문에, Unity에서 기본적으로 제공해주었던 충돌처리 기능을 사용할 수 없게 됩니다.
- 즉, 원래는 Rigidbody를 추가한 상태에서 object와 충돌하게 되면, 오브젝트가 멈추었는데, Is Trigger값을 체크하게 되면, 전용 method에서 처리해주지 않는다면, 그냥 충돌된 object를 뚫고 나가버리게 됩니다.

## Custom Trigger Method
- 충돌을 처리하기 위해 사용하는 Trigger method는 다양하게 있지만, 대표적으로 OnTriggerEnter(Collider other)라는 method를 사용합니다.
- OnTriggerEnter(Collider other) method는 IsTriggerOn이 체크된 오브젝트가 다른 오브젝트와 충돌 되었을때 call되는 method 입니다.
- 해당 method는 반드시 Collider 오브젝트를 parameter로 갖어야하며, 이름은 자유롭게 사용해도 됩니다.
- 좀더 자세한 충돌처리를 위할때에는, Collider 오브젝트의 tag값을 확인하는 방법 등을 사용합니다.
- example of using OnTriggerEnter(Collider other) method
```c#
private void OnTriggerEnter(Collider other)
{
    if(other.tag == "Player"){
        ; // do something
    }
}
```

## UI
- Unity에서 UI를 다룰때에는 Canvas 오브젝트를 기반으로 처리하게 된다.
- 이후, 다양한 UI object들을 Canvas 오브젝트의 child object로 사용하여 처리하면 된다.
- UI 제작을 할때에는, 보통 Game Tab 밑에 있는 3D View 버튼을 눌러 2D View로 변경하는 진행하는 것이 좋다
- Canvas 오브젝트를 더블클릭하여, Scene화면에서 UI 화면으로 전환 시킬 수 있다.
    - 이걸 하지 않게되면, 직접 Zoom-In, Zoom-Out을 해서 화면 전환을 해야한다.

## Text
- Text 오브젝트에서 overflow 설정을 할 수 있는데, 이 설정을 하게 되면, font가 커져도 오브젝트 사이즈에 상관없이 text가 출력 될 수 있게 해준다.

## GameManager
- Unity에서 UI관련 script를 처리 할 때에는 GameManager라는 별도의 object에서 처리해주는 것이 좋다.
- Empty Object의 이름을 GameManager로 설정하여 진행해주면되는데, 사실 이름 자체는 굳이 GameManager로 설정하지 않아도 된다. (다만, 통상적으로 GamaManager로 사용함)
- 또한 UI 등을 담당하는 GameManager라는 이름의 script를 만들고, 이를 GameManager라는 오브젝트에 적용하여, UI 관련 script처리를 진행하면 된다.
- script에서 UI를 처리하기 위해선 using UnityEngine.UI를 설정해 주어야한다.

## How to load Scene
- Script에서 Scene을 load하는 방법은 다음과 같다.
- 
```c#
using UnityEngine.SceneManageMent;
... // some code
SceneManager.LoadScene("Scene_Name");
```
- 이러한 scene관련 처리도 보통 GameManager가 담당한다.

## Scene을 load한 후 화면이 어두워지는 현상
- Unity에서 Scene을 load한 후 화면이 어두워지는 현상은 보통 Unity내에서만 일어나는 현상이고 실제로 Build를 하게 되면 그러한 현상은 일어나지 않게됩니다.
- 다만 Unity에서도 해당 문제를 해결하고 싶다면, 다음과 같은 방법으로 해결할 수 있습니다.
- Window -> Rendering -> Lighting -> Auto Generate 체크박스 해제하기 -> Click Generate Lighting

## PlayerPrefs
- Unity에서는 PlayerPrefs라는 class를 이용하여 save/load 기능을 사용할 수 있다.
- PlayerPrefs class는 Get Method들을 통해 특정 data를 load하고, Set Method를 통해 특정 data를 save합니다.
- 사용할 수 있는 type들로는 Int, Float, String이 있습니다.
- example of using PlayerPrefs
```c#
PlayerPrefs.SetInt("Level", 3);
... (some code);
int level = PlayerPrefs.GetInt("Level");s
```
- 이러한 save/load 기능도 보통 GameManager에서 담당합니다.
- 다만 PlayerPrefs를 이용하는 것은 주요 파일 변경에 위험이 있기때문에, 보통 대규모회사에서는 자체 DB를 갖고있는 서버를 이용하여 save/load 기능을 구현합니다.

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}