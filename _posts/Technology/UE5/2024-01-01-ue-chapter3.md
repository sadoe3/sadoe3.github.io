---
title: "Unreal Engine 5 : How to Implement a Dedicated Server"

categories:
    - ue5

tags:
    - [Game Engine, Unreal Engine 5, Multiplayer, Network, Dedicated Server, Replication]

toc: true
toc_label: "목차"
toc_sticky: false
classes: wide

date: 2024-01-01
---

# Unreal Engine 5 : Chapter 3

## Networking and Multiplayer
You can see the detailed information [here](https://dev.epicgames.com/documentation/en-us/unreal-engine/networking-and-multiplayer-in-unreal-engine)


## Replication in Unreal Engine
Replication is the process of synchronizing data and behaviors across the server and connected clients in a multiplayer game
- In Unreal Engine, `AActor` is the primary class used for replication
- By **default**, actors are **not replicated**  
- To enable replication, set the **`bReplicates`** property of the actor to `true`
    ```cpp
    MyActor->bReplicates = true;
    ```
- Once enabled, Unreal Engine handles the synchronization of the actor's state between the server and clients
- Unreal Engine provides three primary systems for implementing replication

### 1. Generic Replication System
This is Unreal Engine's **default replication system**, designed to cover most use cases
- It works well for games with a moderate number of players and objects

### 2. Replication Graph
The replication graph is designed for games with a **large number of connections** or **many actors** to replicate efficiently
- It organizes and filters actors into groups to minimize bandwidth usage and optimize replication performance 
- Example: Filtering actors based on proximity to players

### 3. Iris Replication System
The Iris replication system is an advanced, **next-generation framework** built on top of the **generic replication system**
- It replaces certain features of the generic system while adding new optimizations for high-performance replication
- Focused on better bandwidth usage, flexibility, and scalability
- Iris is designed to address the limitations of the generic replication system, especially in complex and dynamic multiplayer environments


## How to Set up Dedicated Server
You can see the detailed information [here](https://dev.epicgames.com/documentation/en-us/unreal-engine/networking-and-multiplayer-in-unreal-engine)
- If you want to run a server in Unreal Engine, you have two main options for server types you can implement
    * **Listen Server**
        + A listen server is hosted by one of the players in the game, meaning the host acts as both the server and a client
        + This setup is simpler to implement and ideal for small-scale games or testing purposes
        + However, it has limitations, such as performance issues on the host's machine and reliance on the host's internet connection
    * **Dedicated Server**
        + A dedicated server is hosted on a standalone machine, separate from any player
        + This setup ensures better performance and stability since it focuses solely on managing the game session
        + Dedicated servers are preferred for large-scale multiplayer games as they provide consistent performance and allow players to connect independently of any one client


### Step 1 : Configure the Project
1. **Change the Project Settings**  
    - Setup the default map
        * for Client
            + setup the `Game Default Map`
        * for Server
            + setup the `Server Default Map`
            + you can configure this in **Advanced** section
    - Modify other project settings properly
2. **Perform the Server-Side Programming**
    - You can implement server-side programming
        * by configuring the `Server Default Map`
        * and associating it with server-specific logic
            + such as properly designed actors, GameMode classes, or other gameplay systems

### Step 2 : Build the Server and Client
1. **Create the Build Target Files**  
    - Close `Unreal Engine`
    - Open the `File Explorer`
    - Navigate to your project's root directory -> `Source`
    - Make two copies of `ProjectNameEditor.Target.cs`
    - Rename them as `ProjectNameServer.Target.cs` and `ProjectNameClient.Target.cs`
    - Open them and replace the word `Editor` of `Server` and `Client`

2. **Build the Server**
    - Right-click on your project's `*.uproject` file and select `Generate Visual Studio project files`
    - Open the project
    - Click the `Platforms` button on the `Main Toolbar`
    - `Windows`
        * Binary Configuration - `Development`
        * Build Target - `ProjectNameServer`
    - Then click `Package Project`
    - Select the proper folder for the build

3. **Create a Source Version of Unreal Engine (Optional)**
    - If there's an error with this message: `Server targets are not currently supported from this engine distribution.`
        * You need to **install** the `source version` of Unreal Engine from `GitHub` to build and run dedicated servers
        * The `binary version` of Unreal Engine from the `Epic Games Launcher` does **not support** for **server** targets, which is why you're encountering the error
    - Sign in to UnrealEngine.com with your verified Epic Games account
    - Open your account dashboard
    - `APPS & ACCOUNTS` -> connect `GitHub`
    - Once you link your accounts, you'll get the invitation email from Github to join `EpicGames Organization`
        * Join it
    - Clone the repository named `UnrealEngine` to where you want through `git`
        * `git clone [repository url].git`
        * it's worth noting that you need **enough** space for this
            + the recommended spec for storage is `1TB SSD` or more
    - `cd` to the newly downloaded folder named `UnrealEngine`
    - `checkout` properly to set the release version if you want
        * `git checkout [release version]`
        * you can check the release version by using `git tag`
    - Install required dependencies by using `Setup.bat`
    - Setup required files by using `GenerateProjectFiles.bat`
    - Then open the `UE5.sln` file on `Visual Studio`
        * If VS said there's some missing pakcages, install them 
    - Build the **solution** of `Unreal Engine` and run it
    - Now navigate to your project's root directory
    - Right-click on your project's `*.uproject` file
        * and select `Generate Visual Studio project files`, then select `Switch Unreal Engine Version...`
        * Choose the newly built Unreal Engine
    - Then open the project and build it again

4. **Build the Client**
    - Click the `Platforms` button on the `Main Toolbar`
    - `Windows`
        * Binary Configuration - `Development`
        * Build Target - `ProjectNameClient`
    - Then click `Package Project`
    - Select the proper folder for the build

### Step 3 : Cook the Content
1. **Cook Server Content**  
    - Open the project on `Unreal Engine`
    - Click the `Platforms` button on the `Main Toolbar`
    - `Windows`
        * Binary Configuration - `Development`
        * Build Target - `ProjectNameServer`
    - Then click `Cook Content`

2. **Cook Client Content**  
    - Open the project on `Unreal Engine`
    - Click the `Platforms` button on the `Main Toolbar`
    - `Windows`
        * Binary Configuration - `Development`
        * Build Target - `ProjectNameClient`
    - Then click `Cook Content`

### Step 4 : Run the Dedicated Server and Clients
Now you can run the dedicated server on CMD
- By **default**, a dedicated server listens on the localhost IP address (`127.0.0.1`) at port `7777`
- You **can change** the port for your dedicated server by adding the command line argument 
    * `-port=<PORT_NUMBER>`
- If you change the port that your server is using, you will also need to change the port when connecting the client to the server



[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}